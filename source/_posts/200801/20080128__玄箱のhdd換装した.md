---
title: 玄箱のHDD換装した
author: 八雲
type: post
date: 2008-01-27T15:11:14+00:00
url: /2008/01/327
categories:
  - 信On
  - 日記

---
先日の事件に懲りて、まじめにバックアップをとるようになった今日この頃。
  
…よーく考えたら玄箱の中に入れてるHDDって120GBくらいのだったよなぁ…
  
で、あけてみてみたら見事にビンゴ。 なんと５年前のHDDでした。（2003年）
  
これじゃぁ、バックアップ先が先にお亡くなりになっちゃうよ！ っていうわけで
  
サブ機のHDDと交換することに。
  
＃本当はメイン機のHDDと交換したかったけど、メイン機はSATA…
  
＃サブ機のHDDは年末に虎の家に余ってた（！）250GBのPATAのHDD

久しぶりに玄箱あけたけど、以外と埃がたまってなくてほっと一息。
  
って、そりゃバックアップの時にしか電源入れないんだから当たり前だよね。
  
で、換装自体はたいしたことなく終了。

ここからがめんどくさい。OSのセットアップと玄箱のセットアップ…
  
とりあえず、玄箱から片付けることに。 いくらなんでも標準のファームウェアは
  
バージョンあがってなさ過ぎなのでパス。（中身Linuxですが）
  
今回もまた Debian を入れることに。
  
手順は書くほどでもないような気がするけどメモ程度に書くと以下の通り。
  
`<br />
１ 玄箱にHDD組み込む前にHDDのパーテーションを全部消す<br />
２ 玄箱にHDD組み込む<br />
３ 玄箱起動<br />
４ Diagランプが赤点滅するので電源OFF→再度ON<br />
５ 玄箱 Debian化キットと玄箱アップデータをダウンロード<br />
６ Debian化キットのファイル名を image.zip にしてアップデータの中へ（上書）<br />
７ KuroSetup.exe 実行。<br />
８ Debian Woody インストール完了<br />
９ Sargeにアップデートするため /etc/apt/sources.list の中のwoody という文字列を<br />
　 全部 sarge に書き換える。<br />
10 apt-get update と apt-get dist-upgrade を実行。色々聞かれるけど、基本デフォルトで。<br />
　 途中、HALTの仕方をいじりますか？みたいな所だけ、元のままさわらないで。と答える<br />
　 eximでエラーとかいわれるがそこは無視。どうせメールサーバーなんて使わない。<br />
11 再起動してsarge化完了<br />
12 aptitude remove exim  メールサーバーはいらないので消す<br />
13 samba入れる。 sambaへのユーザー登録を忘れずに！<br />
14 ntpdate入れる。玄箱は時刻狂いまくるみたいなので、/etc/cron.hourly にシェルスクリプト<br />
　 作って入れておく。 ntpdate [ntp サーバー]<br />
` 

…適当すぎて何の参考にもならない気がする。とりあえず、これでファイルサーバーは動くけれども
  
それだけだったら純正ファームでいいじゃん。みたいなレベル。まぁ、DDNSの更新くらいはやらせ
  
たいなぁなんて思ったり。。。まぁ、これからこれから。
  
で、とりあえずバックアップ対象のデータを全部転送したら… 5時間くらいかかってくれましたよ？

おっと。忘れないうちにサブ機も一応セットアップ。
  
こっちはたぶんメッセンジャーとか信長（やるのか？）をするために使うはずなので、優先度はちょい
  
低め。でも気分悪いのでさくっと済ませる。 というわけで、OSはVistaにした。
  
Vistaはインストールがすごい楽。最初にちょこちょこ質問に答えるとあとは全自動。
  
ドライバもちょっと前のマシンならすべて自動で入る。 もし駄目でもWindowsUpdateから拾ってきて
  
くれたりしてかなり親切… このWindowsUpdateとインストーラだけXPに移植してくれないかなぁ…
  
なんて思ったりもするくらいの出来。 OS自体はまぁ。悪くはないと思うけどまだ早いかなー。
  
きっとあと2年くらいするとかなり変わると思うんだけれども。 でもUACはちとうっとうしい。

久しぶりに家にいる休日、なかなかめんどくさいことばっかりしたなぁ。